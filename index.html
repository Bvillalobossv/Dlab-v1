<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SenseWell</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Pantalla 1: Bienvenida -->
  <div id="screen1" class="screen active">
    <img src="images/logo.png" alt="SenseWell Logo" class="logo" />
    <h2>Bienvenido a SenseWell</h2>
    <p>
      Analizamos el ambiente a tu alrededor y tus respuestas para detectar c√≥mo te sientes.
      Si notas ruido, tensi√≥n o cansancio, te enviaremos pausas breves y mensajes positivos
      para mantener tu bienestar. Rel√°jate, nosotros cuidamos tu equilibrio.
    </p>
    <button id="btnStart" class="btn">Empezar ahora</button>
  </div>

  <!-- Pantalla 2: Mockup -->
  <div id="screen2" class="screen">
    <img src="images/mockup.png" alt="Mockup de SenseWell" class="mockup" />
    <h2>Medici√≥n ambiental</h2>
    <p>Vamos a registrar el nivel de ruido ambiental y mostrarte tu estado.</p>
    <button id="btnNext" class="btn">Siguiente</button>
  </div>

  <!-- Pantalla 3: Medici√≥n -->
  <div id="screen3" class="screen">
    <h2>Medici√≥n en progreso</h2>
    <p><strong>Decibeles detectados:</strong> <span id="dbValue">‚Äî</span> dB</p>
    <div id="barContainer"><div id="bar"></div></div>
    <p id="status">Esperando inicio...</p>

    <div class="control-row">
      <label>Calibraci√≥n: <span id="calVal">0</span>dB</label>
      <input type="range" id="calibration" min="-10" max="10" value="0" />
    </div>

    <div class="control-row">
      <label>Suavizado:</label>
      <select id="smoothing">
        <option value="0">0</option>
        <option value="0.5">0.5</option>
        <option value="0.8" selected>0.8</option>
        <option value="0.9">0.9</option>
      </select>
    </div>

    <button id="toggleBtn" class="btn">üéôÔ∏è Iniciar medici√≥n</button>
  </div>

  <!-- Pantalla 4: Resultados (Ruido) -->
  <div id="screen4" class="screen">
    <!-- Selector superior (segmented control) -->
    <div class="segmented">
      <button id="tabNoise" class="segment active">Ruido ambiental</button>
      <button id="tabScan" class="segment">Escaneo corporal</button>
    </div>

    <h2>Resultados de tus mediciones</h2>
    <p id="resultsSummary">Aqu√≠ aparecer√° el resumen de tu estado</p>

    <!-- Gr√°fico hist√≥rico -->
    <canvas id="historyChart" width="400" height="200"></canvas>

    <!-- Indicador actual -->
    <h3>Tu indicador actual</h3>
    <div id="currentIndicator" class="indicator-card"></div>

    <!-- Carrusel con todos los indicadores -->
    <h3>Informaci√≥n de todos los indicadores</h3>
    <div id="allIndicators" class="carousel"></div>

    <div class="stack-sm">
      <button id="btnRetry" class="btn">Medir otra vez</button>
      <button id="btnNewDay" class="btn btn-secondary">+ Nuevo d√≠a</button>
      <button id="btnGoIntegration" class="btn btn-outline">Ver indicador combinado</button>
    </div>
  </div>

  <!-- Pantalla 5: Detalle de indicador -->
  <div id="screen5" class="screen">
    <button id="btnBackResults" class="btn btn-secondary">‚¨Ö Volver</button>
    <div id="indicatorDetail" class="indicator-detail"></div>
  </div>

  <!-- ===== Escaneo corporal (nuevo flujo) ===== -->

  <!-- Pantalla 6: Introducci√≥n -->
  <div id="screen6" class="screen">
    <div class="card max-600">
      <div class="checkmark">‚úì</div>
      <h2>Introducci√≥n</h2>
      <p>
        Bienvenida/o al escaneo corporal personalizado. Este proceso tiene como objetivo
        ayudarte a mejorar tu bienestar f√≠sico y emocional mediante el an√°lisis de tu postura,
        gestos y niveles de estr√©s. La informaci√≥n recopilada se utiliza exclusivamente
        para fines de evaluaci√≥n y mejora personal.
      </p>
      <p class="muted">
        Tu privacidad es nuestra prioridad: todos los datos se manejan de forma confidencial y segura.
      </p>
      <div class="stack-sm">
        <button id="btnScanStart" class="btn">Comenzar escaneo corporal</button>
        <button class="btn btn-link" id="btnScanBackToResults">‚Üê Volver a resultados</button>
      </div>
    </div>
  </div>

  <!-- Pantalla 7: Encuesta laboral -->
  <div id="screen7" class="screen">
    <h2>Encuesta de contexto</h2>
    <form id="workSurvey" class="form max-700">
      <div class="form-row two">
        <div>
          <label>Fecha y hora</label>
          <input type="datetime-local" id="ws_datetime" required />
        </div>
        <div>
          <label>√Årea / Puesto</label>
          <select id="ws_area" required>
            <option>Ventas</option>
            <option>Administraci√≥n</option>
            <option>Finanzas</option>
            <option>TI</option>
            <option>Marketing</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <label>Horas trabajadas</label>
        <input type="number" id="ws_hours" min="0" max="24" placeholder="Ej: 6" required />
      </div>

      <div class="slider-group">
        <label>¬øC√≥mo percibes tu <b>carga de trabajo</b> hoy?</label>
        <input type="range" min="1" max="10" value="5" id="ws_carga" />
        <div class="range-ticks"><span>1</span><span>10</span></div>
      </div>

      <div class="slider-group">
        <label>¬øCu√°l ha sido tu <b>ritmo de trabajo</b>?</label>
        <input type="range" min="1" max="10" value="5" id="ws_ritmo" />
        <div class="range-ticks"><span>1</span><span>10</span></div>
      </div>

      <div class="slider-group">
        <label>¬øRealizaste <b>pausas</b> durante el d√≠a?</label>
        <input type="range" min="1" max="10" value="5" id="ws_pausas" />
        <div class="range-ticks"><span>1</span><span>10</span></div>
      </div>

      <div class="slider-group">
        <label>¬øTe sientes <b>apoyado/a</b> en el trabajo?</label>
        <input type="range" min="1" max="10" value="5" id="ws_apoyo" />
        <div class="range-ticks"><span>1</span><span>10</span></div>
      </div>

      <div class="slider-group">
        <label>¬øC√≥mo percibes tu <b>comunicaci√≥n</b> con colegas?</label>
        <input type="range" min="1" max="10" value="5" id="ws_comunicacion" />
        <div class="range-ticks"><span>1</span><span>10</span></div>
      </div>

      <div class="slider-group">
        <label>¬øC√≥mo calificar√≠as tu <b>estr√©s general</b> hoy?</label>
        <input type="range" min="1" max="10" value="5" id="ws_estres" />
        <div class="range-ticks"><span>1</span><span>10</span></div>
      </div>

      <div class="stack-sm">
        <button type="button" id="btnToBodyScan" class="btn">Continuar al escaneo corporal</button>
        <button type="button" id="btnSurveyBack" class="btn btn-secondary">Volver</button>
      </div>
    </form>
  </div>

  <!-- Pantalla 8: Body Scan (clic en zonas) -->
  <div id="screen8" class="screen">
    <h2>Escaneo Corporal</h2>
    <p class="muted">(Escala lineal en cada pregunta: 1 = completamente relajado/a, 10 = m√°xima tensi√≥n o incomodidad)</p>

    <div class="body-scan">
      <!-- Silueta SVG simple con zonas clicables -->
      <svg id="bodySvg" viewBox="0 0 120 300" class="body-svg" aria-label="Mapa corporal">
        <!-- Piernas -->
        <rect id="zone_Pies y piernas" x="40" y="210" width="40" height="70" class="zone" />
        <!-- Caderas / lumbar -->
        <rect id="zone_Caderas y zona lumbar" x="38" y="180" width="44" height="28" class="zone" />
        <!-- Abdomen -->
        <rect id="zone_Abdomen y respiraci√≥n" x="38" y="150" width="44" height="28" class="zone" />
        <!-- Pecho -->
        <rect id="zone_Pecho" x="35" y="120" width="50" height="28" class="zone" />
        <!-- Espalda alta / hombros -->
        <rect id="zone_Espalda alta y hombros" x="30" y="95" width="60" height="22" class="zone" />
        <!-- Cuello y garganta -->
        <rect id="zone_Cuello y garganta" x="50" y="78" width="20" height="14" class="zone" />
        <!-- Mand√≠bula y boca -->
        <rect id="zone_Mand√≠bula y boca" x="48" y="62" width="24" height="14" class="zone" />
        <!-- Frente/sienes/ojos -->
        <rect id="zone_Frente, sienes y ojos" x="46" y="44" width="28" height="16" class="zone" />
        <!-- Cabeza general -->
        <circle id="zone_Cabeza en general" cx="60" cy="24" r="16" class="zone" />
      </svg>

      <!-- Panel din√°mico de preguntas por zona -->
      <div class="zone-panel">
        <h3 id="zp_title">Selecciona una zona</h3>
        <div id="zp_content" class="zone-content muted">Toca una zona del cuerpo para registrar tu nivel de tensi√≥n (1‚Äì10) y s√≠ntomas.</div>
      </div>
    </div>

    <div class="card max-700">
      <h3>¬øNotaste alguno de estos signos durante el recorrido?</h3>
      <div class="checks">
        <label><input type="checkbox" class="symptom" value="Respiraci√≥n corta o agitada"> Respiraci√≥n corta o agitada</label>
        <label><input type="checkbox" class="symptom" value="Dolor de cabeza"> Dolor de cabeza</label>
        <label><input type="checkbox" class="symptom" value="Hombros r√≠gidos"> Hombros r√≠gidos</label>
        <label><input type="checkbox" class="symptom" value="Mand√≠bula apretada"> Mand√≠bula apretada</label>
        <label><input type="checkbox" class="symptom" value="Otro"> Otro</label>
      </div>

      <div class="slider-group">
        <label><b>Nivel total</b> de tensi√≥n f√≠sica en este momento</label>
        <input type="range" min="1" max="10" value="5" id="bs_total" />
        <div class="range-ticks"><span>1</span><span>10</span></div>
      </div>

      <div class="slider-group">
        <label><b>Cansancio f√≠sico general</b> al finalizar la jornada</label>
        <input type="range" min="1" max="10" value="5" id="bs_fatiga" />
        <div class="range-ticks"><span>1</span><span>10</span></div>
      </div>
    </div>

    <div class="stack-sm">
      <button id="btnBodyScanFinish" class="btn">Ver resultados del escaneo</button>
      <button id="btnBodyScanBack" class="btn btn-secondary">Volver</button>
    </div>

    <div class="card max-700">
      <h3>Terapia Som√°tica</h3>
      <p class="muted">
        Finalizar la encuesta con un escaneo corporal es una pr√°ctica respaldada por mindfulness y psicolog√≠a som√°tica.
        El body scan (Kabat-Zinn) potencia la interocepci√≥n: al recorrer mentalmente cada zona, identificas tensiones
        tempranas y generas una respuesta de relajaci√≥n en el sistema nervioso. Este cierre entrega datos √∫tiles y,
        adem√°s, un instante real de autocuidado.
      </p>
      <details>
        <summary>Interpretaci√≥n de niveles 1 a 10</summary>
        <div class="grid-interpret">
          <div><b>1‚Äì2</b><br/>Relajaci√≥n profunda</div>
          <div><b>3‚Äì4</b><br/>Ligera tensi√≥n</div>
          <div><b>5</b><br/>Zona neutra / alerta inicial</div>
          <div><b>6‚Äì7</b><br/>Estr√©s moderado</div>
          <div><b>8</b><br/>Estr√©s alto</div>
          <div><b>9</b><br/>Estr√©s muy alto</div>
          <div><b>10</b><br/>Alerta cr√≠tica</div>
        </div>
      </details>
    </div>
  </div>

  <!-- Pantalla 9: Resultados del escaneo -->
  <div id="screen9" class="screen">
    <h2>Resumen Final ‚Äî Escaneo corporal</h2>

    <div class="results-grid max-900">
      <div class="card">
        <h3>Puntajes por zona</h3>
        <ul id="bs_zone_list" class="zones-list"></ul>
      </div>
      <div class="card">
        <h3>Indicadores</h3>
        <p><b>Tensi√≥n media</b>: <span id="bs_avg">‚Äî</span>/10</p>
        <p><b>Nivel total</b>: <span id="bs_total_display">‚Äî</span>/10</p>
        <p><b>Fatiga</b>: <span id="bs_fatiga_display">‚Äî</span>/10</p>
        <p><b>S√≠ntomas</b>: <span id="bs_symptoms_display">Ninguno</span></p>
        <canvas id="bsChart" height="220"></canvas>
      </div>
    </div>

    <div class="stack-sm">
      <button id="btnToIntegration" class="btn">Combinar con decibeles</button>
      <button id="btnScanResultsBack" class="btn btn-secondary">Volver</button>
    </div>
  </div>

  <!-- Pantalla 10: Integraci√≥n Ruido + Escaneo -->
  <div id="screen10" class="screen">
    <h2>Indicador combinado</h2>
    <p class="muted">Unimos el promedio de decibeles con la tensi√≥n corporal para estimar el indicador real del trabajador.</p>

    <div class="card max-800">
      <div class="two-cols">
        <div>
          <h3>Ruido</h3>
          <p><b>√öltimo promedio</b>: <span id="ix_db">‚Äî</span> dB</p>
          <p><b>Clasificaci√≥n</b>: <span id="ix_db_class">‚Äî</span></p>
        </div>
        <div>
          <h3>Escaneo corporal</h3>
          <p><b>Tensi√≥n media</b>: <span id="ix_bs_avg">‚Äî</span>/10</p>
          <p><b>Total</b>: <span id="ix_bs_total">‚Äî</span>/10</p>
        </div>
      </div>

      <hr/>
      <h3>Resultado</h3>
      <p><b>√çndice combinado</b>: <span id="ix_score">‚Äî</span>/100</p>
      <p><b>Interpretaci√≥n</b>: <span id="ix_label">‚Äî</span></p>
      <p id="ix_reco" class="muted"></p>
    </div>

    <div class="stack-sm">
      <button id="btnIntegrationBack" class="btn btn-secondary">Volver</button>
      <button id="btnIntegrationHome" class="btn btn-outline">Ir al inicio</button>
    </div>
  </div>

  <!-- Script principal -->
  <script src="app.js"></script>
</body>
</html>
